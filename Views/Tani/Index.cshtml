@{
    ViewData["Title"] = "Tanı Girişi";
}

@model IEnumerable<HastaneNamespace.Models.Tani>

<div class="button-group">
    <button id="allBtn" onclick="showAll()">Tümü</button>
    <button id="favoritesBtn" onclick="showFavorites()">Sık Kullanılanlar</button>
</div>

<form method="get" action="/Tani/Index">
    <input type="text" name="search" placeholder="Tanı kodu veya adıyla ara">
    <button type="submit">Ara</button>
</form>

<div id="tanilar" style="height: 200px; overflow-y: scroll;">
    @foreach (var tani in Model)
    {
        <div>
            <input type="checkbox" value="@tani.ID" /> @tani.Tani_adi
            <span onclick="toggleFavorite(@tani.ID)">★</span>
        </div>
    }
</div>

<div id="selectedTanilar">
    <h3>Başvuruya Ait Tanılar</h3>
    <div id="selectedList">
        <!-- Seçilen tanılar buraya eklenecek -->
    </div>
</div>

<script>
    function showAll() {
        document.getElementById('tanilar').style.display = 'block';
        document.getElementById('favorites').style.display = 'none';
    }

    function showFavorites() {
        document.getElementById('tanilar').style.display = 'none';
        document.getElementById('favorites').style.display = 'block';
    }

    function addSelectedTani(id, name) {
        const taniItem = document.createElement('div');
        taniItem.innerHTML = `${name} <span onclick="removeTani(this)">[Sil]</span>`;
        document.getElementById('selectedList').appendChild(taniItem);
    }

    function removeTani(element) {
        element.parentElement.remove();
    }

    function toggleFavorite(taniId) {
        const url = `/Tani/AddToFavorites/${taniId}`;
        fetch(url, { method: 'POST' })
            .then(() => {
                alert('Favorilere eklendi veya çıkarıldı.');
            });
    }
</script>
